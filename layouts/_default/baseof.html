{{/*  layouts/_default/baseof.html  */}}
<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}" class="dark">
<head>
  {{ partial "head.html" . }}

  <!-- Ставим тему ещё до рендера, чтобы не мигало -->
  <script>
    (function () {
      const storageKey = 'theme';                                 // единый ключ
      const saved      = localStorage.getItem(storageKey);        // 'dark' | 'light' | null
      const theme      = saved || 'dark';                         // default = dark
      document.documentElement.classList.remove('light', 'dark');
      document.documentElement.classList.add(theme);
    })();
  </script>
</head>

<body>
  {{ partial "header.html" . }}

  {{ block "main" . }}{{ end }}

  {{ partial "footer.html" . }}

  <!-- переключатель подключаем один раз -->
  <script src="{{ "js/theme-toggle.js" | relURL }}" defer></script>
</body>
</html>
